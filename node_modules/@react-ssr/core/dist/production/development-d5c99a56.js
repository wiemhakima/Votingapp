"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var r=require("./register-e8b55e52.js"),t=e(require("path")),s=e(require("fs-extra"));require("react"),require("slash"),require("lz-string"),require("urlsafe-base64");var n=e(require("fs"));require("recursive-readdir");var i=require("./helpers-df77f6cd.js"),a=e(require("memory-fs")),u=e(require("webpack"));require("webpack-merge"),require("mini-css-extract-plugin"),require("optimize-css-assets-webpack-plugin"),require("terser-webpack-plugin");var c=e(require("http-proxy-middleware")),o=e(require("webpack-dev-server")),f=process.cwd(),p=require("unionfs").ufs,l=new a;p.use(n).use(l);var d=function(){var e=r.asyncToGenerator(r.regenerator.mark((function e(n){var a,d,g,v,q,y;return r.regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.removeSync(t.join(f,r.ssrConfig.distDir)),e.next=3,i.getEntry(l);case 3:return a=e.sent,d=i.slicedToArray(a,2),g=d[0],v=d[1],q=i.configureWebpack(g),(y=u(q)).inputFileSystem=p,8888,e.next=13,new i.promise((function(e,s){new o(y,{hotOnly:!0,noInfo:!0,stats:"errors-only",overlay:!1,compress:!1,serveIndex:!1,after:function(e,s,n){for(var i=n.outputFileSystem,a=function(s){var n=v[s],a=r.getPageId(n,"_");e.get("/_react-ssr/".concat(a,".css"),(function(e,s){var n=t.join(f,r.ssrConfig.distDir,"".concat(a,".css")),u=i.existsSync(n)?i.readFileSync(n).toString():"";s.writeHead(200,{"Content-Type":"text/css"}),s.end(u,"utf-8")})),e.get("/_react-ssr/".concat(a,".js"),(function(e,s){var n=t.join(f,r.ssrConfig.distDir,"".concat(a,".js")),u=i.readFileSync(n).toString();s.status(200).type(".js").send(u)}))},u=0;u<v.length;u++)a(u)}}).listen(8888,(function(e){s(e)}));var i=c({target:"http://localhost:".concat(8888),changeOrigin:!0,ws:!0,logLevel:"error"});n.use("/*.css",i),n.use("/*.js",i),n.use("/*.json",i),n.use("/sockjs-node*",i),e()}));case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();exports.default=d;
